(this["webpackJsonpmask-app"]=this["webpackJsonpmask-app"]||[]).push([[0],{20:function(e,t,n){e.exports=n.p+"static/media/Icon_location_red.abc33708.svg"},21:function(e,t,n){e.exports=n.p+"static/media/Icon_location_orange.359a86cc.svg"},22:function(e,t,n){e.exports=n.p+"static/media/Icon_location_green.b0317730.svg"},23:function(e,t,n){e.exports=n.p+"static/media/Icon_search.7bf22ceb.svg"},24:function(e,t,n){e.exports=n.p+"static/media/img_bg_orange.0a9c376b.svg"},26:function(e,t,n){e.exports=n(83)},31:function(e,t,n){},33:function(e,t,n){},73:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(16),o=n.n(r),i=(n(31),n(25)),l=n(5),s=n.n(l),u=n(17),m=n(3),d=(n(33),n(18)),f=n.n(d),p=(n(55),n(19)),v=n.n(p),g=(n(73),n(4)),h=(n(74),n(75),n(76),n(20)),b=n.n(h),E=n(21),y=n.n(E),w=n(22),x=n.n(w),O=function(e){var t=e.allPlace,n=e.latitude,r=e.longitude,o=e.init,i=e.zoom,l=function(e,t){var n=e+t,a=g.icon({iconUrl:b.a,iconAnchor:[25,15]}),c=g.icon({iconUrl:y.a,iconAnchor:[25,15]}),r=g.icon({iconUrl:x.a,iconAnchor:[25,15]});return n<50?a:n>=50&&n<200?c:r},s=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=new g.LatLng(n,r);if(t.length&&n&&r){s.current=g.map("map",{center:e,zoom:i}),g.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(s.current);var a=new g.MarkerClusterGroup;s.current.addLayer(a),t.filter((function(e){return e.geometry.coordinates[1]>0&&e.geometry.coordinates[0]>0})).forEach((function(e,t){var c=new g.LatLng(e.geometry.coordinates[1],e.geometry.coordinates[0]),i=g.popup({minWidth:209,maxWidth:209}).setLatLng(c).setContent("\n            <div>\n              <div class='font-bold fz-16 text-333 mb-4'>".concat(e.name,"</div>\n              <div class='fz-12 text-left mb-4'>").concat(e.address,"</div>\n              <div class='fz-12 text-left mb-4'>\u71df\u696d\u6642\u9593\uff5c").concat(e.note||"\u7121\u6a19\u793a","</div>\n              <div class='fz-12 text-left mb-4'>\u9023\u7d61\u96fb\u8a71\uff5c").concat(e.phone,"</div>\n              <div class='fz-12 text-left text-CCC mb-8'>\u8cc7\u8a0a\u66f4\u65b0\u65bc ").concat(e.updated,"</div>\n              <div class='flex-row mb-8'>\n                <div class='orange mr-8'>\u6210\u4eba\u53e3\u7f69 ").concat(e.adultCount,"\u500b</div>\n                <div class='yellow'>\u5152\u7ae5\u53e3\u7f69 ").concat(e.childCount,'\u500b</div>\n              </div>\n              <div class="google google-').concat(t,'">Google \u8def\u7dda\u5c0e\u822a</div>\n            </div>\n          ')),s=g.marker(c,{icon:l(e.mask_adult,e.mask_child)});a.addLayer(s),s.bindPopup(i).on("click",(function(){i.openPopup()})).on("popupopen",(function(){var n=document.querySelector(".google-".concat(t));n&&n.addEventListener("click",(function(){window.open("https://www.google.com/maps/search/?api=1&query=".concat(e.geometry.coordinates[1],",").concat(e.geometry.coordinates[0]))}))})),e.geometry.coordinates[1]!==n||e.geometry.coordinates[0]!==r||o||s.openPopup()}))}return function(){s.current&&s.current.remove()}}),[t,n,r,o,i]),c.a.createElement("div",{id:"map"})},j=(n(77),n(78),c.a.memo((function(e){var t=e.isTab,n=e.children,a=e.click;return c.a.createElement("div",{className:"tab ".concat(t?"active":""),onClick:a},n)}))),N=(n(79),n(23)),k=n.n(N),S=c.a.memo((function(e){var t=e.getValue,n=e.reset,r=e.parentSearch,o=e.clickSearch,i=Object(a.useState)(r),l=Object(m.a)(i,2),s=l[0],u=l[1];return c.a.createElement("div",{className:"input-wrap"},c.a.createElement("img",{src:k.a,alt:"",className:"icon-search",onClick:function(){return o(s)}}),c.a.createElement("input",{type:"text",value:s,className:"search",placeholder:"\u641c\u5c0b\u5340\u57df , \u5730\u5740 , \u85e5\u5c40",onKeyDown:t,onChange:function(e){u(e.target.value),n(e)}}))}),(function(){return!0}));function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function z(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var T=c.a.createElement("defs",null,c.a.createElement("style",null,".a{fill:#fff;}")),L=c.a.createElement("path",{className:"a",d:"M14.008,14.192l6.054-6.049a1.143,1.143,0,0,0-1.619-1.615l-6.859,6.854a1.141,1.141,0,0,0-.033,1.577l6.888,6.9a1.143,1.143,0,0,0,1.619-1.615Z",transform:"translate(-11.251 -6.194)"}),_=function(e){var t=e.svgRef,n=e.title,a=z(e,["svgRef","title"]);return c.a.createElement("svg",C({width:9.147,height:16,viewBox:"0 0 9.147 16",ref:t},a),n?c.a.createElement("title",null,n):null,T,L)},P=c.a.forwardRef((function(e,t){return c.a.createElement(_,C({svgRef:t},e))})),D=(n.p,function(e){var t=e.setTab,n=e.getTab,r=e.isSelect,o=e.search,i=e.parentSearch,l=e.resetList,s=e.isSetLocation,u=Object(a.useState)(!1),d=Object(m.a)(u,2),f=d[0],p=d[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"search-box ".concat(f&&i||s?"searching-box":"")},c.a.createElement(S,{parentSearch:i,getValue:function(e){var t=e.target.value;"Enter"===e.key&&(p(!!t),o(t))},reset:function(e){var t=e.target.value;t||(o(t),p(!1))},clickSearch:function(e){p(!!e),o(e)}}),c.a.createElement("div",{className:"tabs ".concat(f&&i?"searching-tabs":"")},["\u6240\u6709\u53e3\u7f69","\u6210\u4eba\u53e3\u7f69","\u5152\u7ae5\u53e3\u7f69"].map((function(e){return c.a.createElement(j,{key:e,isTab:r===e,click:function(){return function(e){t(e),n(e)}(e)}},e)})))),c.a.createElement("div",{className:"back-list ".concat(s?"block":""),onClick:l},c.a.createElement(P,{className:"arrow"}),"\u8fd4\u56de\u5217\u8868"))}),M=n(6),R=n.n(M),Y=(n(81),n(24)),I=n.n(Y),W=c.a.memo((function(){return c.a.createElement("div",{className:"image-wrapper"},c.a.createElement("img",{src:I.a,alt:""}),c.a.createElement("div",null,R()(Date.now()).format("YYYY - MM - DD")),c.a.createElement("div",null,"\u661f\u671f",function(){switch(R()().day()){case 0:return"\u65e5";case 1:return"\u4e00";case 2:return"\u4e8c";case 3:return"\u4e09";case 4:return"\u56db";case 5:return"\u4e94";case 6:return"\u516d"}}()),c.a.createElement("div",{className:"flex"},c.a.createElement("div",{className:"inline"},"\u8eab\u5206\u8b49\u672b\u4e00\u78bc",c.a.createElement("span",null,"\u5076\u6578"),"\u5b57\u865f\u8005\u53ef\u8cfc\u8cb7\u53e3\u7f69")),c.a.createElement("div",null,"\u203b\u4e00\u9031\u9650\u8cfc\u4e00\u6b21\uff0c\u6bcf\u6b21\u4e00\u4eba\u9650\u8cfc\u5169\u7247"))}),(function(){return!0})),H=(n(82),c.a.memo((function(e){var t=e.place,n=e.isSelect,a=void 0===n?"\u6240\u6709\u53e3\u7f69":n,r=e.setPosition,o=function(){return t.adultCount+t.childCount};return c.a.createElement("div",{className:"place-box",onClick:function(){return r(t)}},c.a.createElement("div",{className:"font-bold fz-16 text-333 mb-4"},t.title),c.a.createElement("div",{className:"mb-4"},t.address),c.a.createElement("div",{className:"fz-12 mb-8"},"\u71df\u696d\u6642\u9593\uff5c",t.note||"\u7121\u6a19\u793a"),c.a.createElement("div",{className:"flex-row"},("\u6240\u6709\u53e3\u7f69"===a||"\u6210\u4eba\u53e3\u7f69"===a)&&t.adultCount>0?c.a.createElement("div",{className:"flex-row justify-between orange mr-8"},c.a.createElement("div",{className:"text"},"\u6210\u4eba\u53e3\u7f69"),c.a.createElement("div",{className:"text"},t.adultCount,"\u500b")):"\u5152\u7ae5\u53e3\u7f69"===a||0===o()?null:c.a.createElement("div",{className:"no-mask mr-8"},"\u53e3\u7f69\u7f3a\u8ca8\u4e2d"),("\u6240\u6709\u53e3\u7f69"===a||"\u5152\u7ae5\u53e3\u7f69"===a)&&t.childCount>0?c.a.createElement("div",{className:"flex-row justify-between yellow"},c.a.createElement("div",{className:"text"},"\u5152\u7ae5\u53e3\u7f69"),c.a.createElement("div",{className:"text"},t.childCount,"\u500b")):"\u6210\u4eba\u53e3\u7f69"===a||0===o()?null:c.a.createElement("div",{className:"no-mask mr-8"},"\u53e3\u7f69\u7f3a\u8ca8\u4e2d"),0===o()?c.a.createElement("div",{className:"no-mask mr-8"},"\u53e3\u7f69\u7f3a\u8ca8\u4e2d"):null),o()>0?c.a.createElement("div",{className:"triangle ".concat(function(e,t){var n=e+t;return n>200?"green":n>=50&&n<200?"oranges":"red"}(t.adultCount,t.childCount))}):null)}),(function(){return!1}))),A="",B=!1,U=!1,q=function(){var e=Object(a.useState)({latitude:0,longitude:0,init:!0,zoom:16}),t=Object(m.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(!0),l=Object(m.a)(o,2),d=l[0],p=l[1],g=Object(a.useState)([]),h=Object(m.a)(g,2),b=h[0],E=h[1],y=Object(a.useState)("\u6240\u6709\u53e3\u7f69"),w=Object(m.a)(y,2),x=w[0],j=w[1],N=Object(a.useState)(""),k=Object(m.a)(N,2),S=k[0],C=k[1],z=Object(a.useState)({start:30,end:0}),T=Object(m.a)(z,2),L=T[0],_=T[1],P=Object(a.useRef)(0),M=Object(a.useRef)(0),R=Object(a.useState)(),Y=Object(m.a)(R,2),I=Y[0],q=Y[1],F=Object(a.useMemo)((function(){var e=L.start,t=L.end;return S?b.filter((function(e){return e.title.includes(S)||e.address.includes(S)})):e&&t?b.filter((function(n,a){return a<e&&t>a})):b.filter((function(t,n){return n<e}))}),[L,b,S]),G=function(e){r({latitude:e.geometry.coordinates[1],longitude:e.geometry.coordinates[0],init:!1,zoom:18}),I&&window.innerWidth<960&&(U=!0,I.style.bottom="-".concat(I.offsetHeight,"px"),C(""))};return Object(a.useEffect)((function(){Promise.all([void navigator.geolocation.getCurrentPosition(function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({latitude:t.coords.latitude,longitude:t.coords.longitude,init:!0,zoom:16}),p(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(p(!0),void v.a.get("https://raw.githubusercontent.com/kiang/pharmacies/master/json/points.json").then((function(e){var t=e.data.features.map((function(e){return Object(i.a)({geometry:e.geometry},e.properties,{title:e.properties.name,adultCount:e.properties.mask_adult,childCount:e.properties.mask_child})}));E(t)})).catch((function(){alert("\u7cfb\u7d71\u767c\u751f\u932f\u8aa4\uff0c\u8acb\u518d\u91cd\u8a66"),p(!1)})))])}),[]),c.a.createElement(c.a.Fragment,null,d?c.a.createElement("div",{className:"relative"},c.a.createElement(f.a,{type:"ThreeDots",color:"orange",height:100,width:100,timeout:3e6})):c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"left"},c.a.createElement(W,null),c.a.createElement(D,{parentSearch:S,search:function(e){A=e,C(e)},setTab:function(){return j(x)},getTab:function(e){j(e)},isSelect:x,resetList:function(){U=!1,C(A)},isSetLocation:U}),c.a.createElement("div",{style:{bottom:"".concat(S?"0px":window.innerWidth>960?"0px":"-".concat(null===I||void 0===I?void 0:I.offsetHeight,"px")),transitionDuration:"".concat(S?".5s":"0s")},ref:function(e){return q(e)},className:"place-box-wrap",onScroll:function(e){(M.current=e.target.scrollTop,M.current>0&&(B=!1),L.start>b.length||S)||e.target.scrollTop/e.target.scrollHeight*100>70&&_({start:L.start+30,end:L.end+30})},onTouchStart:function(e){1===e.touches.length&&(0===M.current&&(B=!0),I&&(I.style.transitionDuration="0s"),P.current=e.touches[0].pageY)},onTouchMove:function(e){1===e.touches.length&&B&&I&&0===M.current&&(I.style.bottom="-".concat(e.touches[0].pageY-P.current,"px"))},onTouchEnd:function(e){1===e.changedTouches.length&&B&&I&&(I.style.transitionDuration=".5s",e.changedTouches[0].pageY-P.current>I.offsetHeight/3&&0===M.current?(I.style.bottom="-".concat(I.offsetHeight,"px"),C("")):I.style.bottom="0px")}},c.a.createElement("div",{className:"overflow"},F.length?F.map((function(e){return c.a.createElement(H,{key:e.id,place:e,isSelect:x,setPosition:G})})):c.a.createElement("div",{className:"no-data"},S&&!F.length?"\u7121\u641c\u5c0b\u8cc7\u6599":"")))),c.a.createElement("div",{className:"right"},c.a.createElement(O,{init:n.init,latitude:n.latitude,longitude:n.longitude,allPlace:b,zoom:n.zoom}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[26,1,2]]]);
//# sourceMappingURL=main.6142b08e.chunk.js.map